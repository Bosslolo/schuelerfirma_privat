{% extends "base.html" %}

{% block title %}Real-Time Statistics{% endblock %}

{% block head %}
<style>
    table {
        border-collapse: collapse;
        width: 100%;
        max-width: 400px;
        margin: 1em auto;
    }
    th, td {
        border: 1px solid #ccc;
        padding: 0.5em 1em;
        text-align: left;
    }
</style>
{% endblock %}

{% block content %}
<h2 style="text-align:center;">Real-Time Consumption</h2>
<table id="statsTable">
    <tr><th>Drink</th><th>Total</th></tr>
    <tr><td>Coffee</td><td id="coffeeCount">{{ data.Coffee or 0 }}</td></tr>
    <tr><td>Tea</td><td id="teaCount">{{ data.Tea or 0 }}</td></tr>
    <tr><td>Chocolate</td><td id="chocoCount">{{ data.Chocolate or 0 }}</td></tr>
    <tr><td>Water</td><td id="waterCount">{{ data.Water or 0 }}</td></tr>
    <tr><td>Juices</td><td id="juiceCount">{{ data.Juices or 0 }}</td></tr>
</table>
{% endblock %}

{% block scripts %}
<script>
function updateStats(){
    fetch('/stats_data')
        .then(r => r.json())
        .then(d => {
            document.getElementById('coffeeCount').textContent = d.Coffee;
            document.getElementById('teaCount').textContent = d.Tea;
            document.getElementById('chocoCount').textContent = d.Chocolate;
            document.getElementById('waterCount').textContent = d.Water;
            document.getElementById('juiceCount').textContent = d.Juices;
        });
}
setInterval(updateStats, 5000);
</script>
{% endblock %}
